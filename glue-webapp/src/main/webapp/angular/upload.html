<!-- https://github.com/danialfarid/ng-file-upload -->
<html>
<head>
</head>
<body>

	<div>
		<!-- Upload on form submit or button click -->
		<form ng-app="fileUpload" ng-controller="MyCtrl" name="form">
			<!--   Single Image with validations -->
			<div class="button" ngf-select ng-model="file" name="file" ngf-pattern="'image/*'" accept="image/*" ngf-max-size="5MB" ngf-min-height="170" ngf-min-width="170" ngf-resize="{width: 170, height: 170}">Select</div>
			Drop files: <div ngf-drop ng-model="file" class="drop-box">Drop
			<button type="submit" ng-click="submit()">submit</button>	
		</form>
	</div>

	<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.7/angular.min.js" type="text/javascript"></script>
	<script src="js/ng-file-upload.min.js" type="text/javascript"></script>
	<script src="js/ng-file-upload-shim.min.js" type="text/javascript"></script>
	<script>

		//inject directives and services.
		var app = angular.module('fileUpload', ['ngFileUpload']);

		app.controller('MyCtrl', ['$scope', 'Upload', function ($scope, Upload) {
		    // upload later on form submit or something similar
		    $scope.submit = function() {
		      if ($scope.form.file.$valid && $scope.file) {
		        $scope.upload($scope.file);
		      }
		    };

		    // upload on file select or drop
		    $scope.upload = function (file) {
		        Upload.upload({
		            url: '/glue/services/events',
		            data: {'file': file, 'username': 'toto'}
		        }).then(function (resp) {
		            console.log('Success ' + resp.config.data.file.name + 'uploaded. Response: ' + resp.data);
		        }, function (resp) {
		            console.log('Error status: ' + resp.status);
		        }, function (evt) {
		            var progressPercentage = parseInt(100.0 * evt.loaded / evt.total);
		            console.log('progress: ' + progressPercentage + '% ' + evt.config.data.file.name);
		        });
		    };
		}]);

	</script>

</body>

</html>